---
import Cart from '../components/Cart.astro';
---
<nav>
    <svg class="menu" width="16" height="15" xmlns="http://www.w3.org/2000/svg"><path d="M16 12v3H0v-3h16Zm0-6v3H0V6h16Zm0-6v3H0V0h16Z" fill="#69707D" fill-rule="evenodd"/></svg>
    <img src="/logo.svg" alt="Logo">
    <div class="divider"></div>
    <svg class="cart" width="22" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M20.925 3.641H3.863L3.61.816A.896.896 0 0 0 2.717 0H.897a.896.896 0 1 0 0 1.792h1l1.031 11.483c.073.828.52 1.726 1.291 2.336C2.83 17.385 4.099 20 6.359 20c1.875 0 3.197-1.87 2.554-3.642h4.905c-.642 1.77.677 3.642 2.555 3.642a2.72 2.72 0 0 0 2.717-2.717 2.72 2.72 0 0 0-2.717-2.717H6.365c-.681 0-1.274-.41-1.53-1.009l14.321-.842a.896.896 0 0 0 .817-.677l1.821-7.283a.897.897 0 0 0-.87-1.114ZM6.358 18.208a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm10.015 0a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm2.021-7.243-13.8.81-.57-6.341h15.753l-1.383 5.53Z" fill="#69707D" fill-rule="nonzero"/></svg>
    <img class="avatar" src="./image-avatar.png" alt="Avatar">

    <Cart></Cart>

    <div class="sidebar">
        <div class="bar">
            <img class="close" src="/icon-close.svg" alt="">
            <div class="nav-item">Collections</div>
            <div class="nav-item">Men</div>
            <div class="nav-item">Women</div>
            <div class="nav-item">About</div>
            <div class="nav-item">Contact</div>
        </div>
    </div>
</nav>

<script>
    const menu = document.querySelector('.menu') as HTMLElement;
    const close = document.querySelector('.close') as HTMLElement;
    const sidebar = document.querySelector('.sidebar') as HTMLElement;
    const bar = document.querySelector('.bar') as HTMLElement;

    if(menu && close && sidebar && bar) {
        menu.addEventListener('click', () => {
            sidebar.style.backgroundColor = 'rgba(0, 0, 0, 0.75)';
            sidebar.style.transform = 'translateX(0)';
            bar.style.transform = 'translateX(0)';
        });
        close.addEventListener('click', () => {
            sidebar.style.backgroundColor = 'transparent';
            bar.style.transform = 'translateX(-100%)';
            setTimeout(() => {
                sidebar.style.transform = 'translateX(-100%)';
            }, 300);
        });
    }

    const cart = document.querySelector('.cart') as HTMLElement;
    const cartPanel = document.querySelector('.cartPanel') as HTMLElement;
    if(cart) {
        cart.addEventListener('click', () => {
            if(cartPanel) {
                cartPanel.style.display = 'block';
                setTimeout(() => {
                    cartPanel.style.opacity = '1';
                }, 10);
            }
        });
    }
</script>

<style>
	nav {
        display: flex;
        align-items: center;
        padding: 1.5rem;
        gap: 1.5rem;
	}
    .divider {
        flex: 1;
    }
    .avatar {
        width: 1.5rem;
        border: 1px solid transparent;
        border-radius: 50%;
        transition: border 0.2s ease-in-out;
    }
    .avatar:hover {
        border-color: var(--orange);
    }
    img, svg {
        cursor: pointer;
    }
    .cart path {
        transition: fill .2s ease-in-out;
    }
    .cart:hover path {
        fill: var(--black);
    }
    .menu path {
        transition: fill .2s ease-in-out;
    }
    .menu:hover path {
        fill: var(--black);
    }

    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: transparent;
        z-index: 10;
        transform: translateX(-100%);
        transition: background-color .3s ease-in-out;
    }
    .bar{
        position: fixed;
        top: 0;
        left: 0;
        z-index: 11;
        background-color: var(--white);
        width: 250px;
        height: 100%;
        padding: 1.5rem;
        transform: translateX(-100%);
        transition: transform .3s ease-in-out;
    }
    .close {
        margin-bottom: 2.5rem;
        transition: transform 0.2s ease-in-out;
    }
    .close:hover {
        transform: rotate(90deg);
    }
    .nav-item {
        margin-bottom: 1rem;
        font-size: 1.2rem;
        font-weight: 700;
        cursor: pointer;
        text-decoration: underline transparent 3px;
        transition: text-decoration 0.2s ease-in-out;
    }
    .nav-item:hover {
        text-decoration: underline var(--orange) 3px;
    }
</style>